

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cunqa.qjob.QJob &mdash; CUNQA  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=1544bbb8" />
      <link rel="stylesheet" type="text/css" href="_static/table.css?v=9571698f" />
      <link rel="stylesheet" type="text/css" href="_static/hide_bases_object.js?v=4ef80c51" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="cunqa.qjob.QJobError" href="cunqa.qjob.QJobError.html" />
    <link rel="prev" title="cunqa.qjob.gather" href="cunqa.qjob.gather.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CUNQA
              <img src="_static/logo_cesga_blanco.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#clone-repository">Clone repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#qmio">QMIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#finisterrae-iii-ft3">Finisterrae III (FT3)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#run-your-first-distributed-program">Run your first distributed program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#qraise-command">1. <code class="docutils literal notranslate"><span class="pre">qraise</span></code> command</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#python-program-example">2. Python Program Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#qdrop-command">3. <code class="docutils literal notranslate"><span class="pre">qdrop</span></code> command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="cunqa.html">CUNQA module</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cunqa.backend.html">cunqa.backend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.backend.Backend.html">cunqa.backend.Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.backend.BackendData.html">cunqa.backend.BackendData</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.circuit.html">cunqa.circuit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.circuit.html#building-circuits">Building circuits</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.circuit.html#circuits-by-json-dict-format">Circuits by json <code class="docutils literal notranslate"><span class="pre">dict</span></code> format</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.circuit.ControlContext.html">cunqa.circuit.ControlContext</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.circuit.CunqaCircuit.html">cunqa.circuit.CunqaCircuit</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.circuit.CunqaCircuitError.html">cunqa.circuit.CunqaCircuitError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.converters.html">cunqa.converters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.converters.convert.html">cunqa.converters.convert</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.converters.ConvertersError.html">cunqa.converters.ConvertersError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.mappers.html">cunqa.mappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.mappers.html#submitting-circuits-with-classical-or-quantum-communications">Submitting circuits with classical or quantum communications</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.mappers.html#mapping-circuits-to-virtual-qpus-in-optimization-problems">Mapping circuits to virtual QPUs in optimization problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.mappers.run_distributed.html">cunqa.mappers.run_distributed</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.mappers.QJobMapper.html">cunqa.mappers.QJobMapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.mappers.QPUCircuitMapper.html">cunqa.mappers.QPUCircuitMapper</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="cunqa.qjob.html">cunqa.qjob</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cunqa.qjob.gather.html">cunqa.qjob.gather</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">cunqa.qjob.QJob</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qjob.QJobError.html">cunqa.qjob.QJobError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.qpu.html">cunqa.qpu</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qpu.html#virtual-qpus">Virtual QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qpu.html#connecting-to-virtual-qpus">Connecting to virtual QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qpu.html#interacting-with-virtual-qpus">Interacting with virtual QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qpu.QPU.html">cunqa.qpu.QPU</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.qutils.html">cunqa.qutils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.html#connecting-to-virtual-qpus">Connecting to virtual QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.html#q-raising-and-q-dropping-at-pyhton">Q-raising and Q-dropping at pyhton</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.html#obtaining-information-about-virtual-qpus">Obtaining information about virtual QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.get_QPUs.html">cunqa.qutils.get_QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.info_QPUs.html">cunqa.qutils.info_QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.nodes_with_QPUs.html">cunqa.qutils.nodes_with_QPUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.qdrop.html">cunqa.qutils.qdrop</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.qraise.html">cunqa.qutils.qraise</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.qutils.QRaiseError.html">cunqa.qutils.QRaiseError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.result.html">cunqa.result</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.result.Result.html">cunqa.result.Result</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.result.ResultError.html">cunqa.result.ResultError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa.transpile.html">cunqa.transpile</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cunqa.transpile.transpiler.html">cunqa.transpile.transpiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="cunqa.transpile.TranspileError.html">cunqa.transpile.TranspileError</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples_gallery.html">Examples gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="_examples/Multiple_circuits_execution.html">Example for execution of multiple circuits in QPUs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#Importing-and-adding-paths-to-sys.path">Importing and adding paths to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#Let's-get-the-QPUs-that-we-q-raised!">Let’s get the QPUs that we q-raised!</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#Let's-create-a-circuit-to-run-in-our-QPUs!">Let’s create a circuit to run in our QPUs!</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#Execution-time!-Let's-do-it-sequentially">Execution time! Let’s do it sequentially</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#Cool-isn't-it?-But-this-circuit-is-too-simple,-let's-try-with-a-more-complex-one!">Cool isn’t it? But this circuit is too simple, let’s try with a more complex one!</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#This-circuit-has-15-qubits-and-10-intermidiate-measurements,-let's-run-it-in-AerSimulator">This circuit has 15 qubits and 10 intermidiate measurements, let’s run it in AerSimulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Multiple_circuits_execution.html#Takes-much-longer-...-let's-parallelize-n-executions-in-n-different-QPUs">Takes much longer … let’s parallelize n executions in n different QPUs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Optimizers_I_upgrading_parameters.html">Examples for optimizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_examples/Optimizers_I_upgrading_parameters.html#Simply-using-the-QPU.run()-method">Simply using the <code class="docutils literal notranslate"><span class="pre">QPU.run()</span></code> method</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Optimizers_I_upgrading_parameters.html#Using-QJob.upgrade_parameters()">Using <code class="docutils literal notranslate"><span class="pre">QJob.upgrade_parameters()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Optimizers_II_mapping.html">Paralelization for gradient-free optimizers: Differential Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_examples/Optimizers_II_mapping.html#QJobMapper">QJobMapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="_examples/Optimizers_II_mapping.html#QPUCircuitMapper">QPUCircuitMapper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Optimizers_II_mapping.html#Paralelization-of-expectation-value-terms">Paralelization of expectation value terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Optimizers_II_mapping.html#Paralelization-for-gradient-optimizers">Paralelization for gradient optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/py_file_examples/cloud_example.html">cloud_example</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/py_file_examples/example_qraise.html">example_qraise</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/py_file_examples/hpc_example.html">hpc_example</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CUNQA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="cunqa.html">CUNQA module</a></li>
          <li class="breadcrumb-item"><a href="cunqa.qjob.html">cunqa.qjob</a></li>
      <li class="breadcrumb-item active">cunqa.qjob.QJob</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cunqa.qjob.QJob.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cunqa-qjob-qjob">
<h1>cunqa.qjob.QJob<a class="headerlink" href="#cunqa-qjob-qjob" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="cunqa.qjob.QJob">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cunqa.qjob.</span></span><span class="sig-name descname"><span class="pre">QJob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qclient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cunqa.qclient.QClient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cunqa.backend.Backend.html#cunqa.backend.Backend" title="cunqa.backend.Backend"><span class="pre">Backend</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">circuit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="cunqa.circuit.CunqaCircuit.html#cunqa.circuit.CunqaCircuit" title="cunqa.circuit.CunqaCircuit"><span class="pre">CunqaCircuit</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">qiskit.QuantumCircuit</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">run_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cunqa.qjob.QJob" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to handle jobs sent to virtual QPUs.</p>
<p>A <a class="reference internal" href="#cunqa.qjob.QJob" title="cunqa.qjob.QJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">QJob</span></code></a> object is created as the output of the <a class="reference internal" href="cunqa.qpu.QPU.html#cunqa.qpu.QPU.run" title="cunqa.qpu.QPU.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method.
The quantum job not only contains the circuit to be simulated, but also simulation instructions and information of the virtual QPU to which the job is sent.</p>
<p>One would want to save the <a class="reference internal" href="#cunqa.qjob.QJob" title="cunqa.qjob.QJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">QJob</span></code></a> resulting from sending a circuit in a variable.
Let’s say we want to send a circuit to a QPU and get the result and the time taken for the simulation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qjob</span> <span class="o">=</span> <span class="n">qpu</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">qjob</span><span class="o">.</span><span class="n">result</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">&lt;cunqa.result.Result object at XXXXXXXX&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_taken</span> <span class="o">=</span> <span class="n">qjob</span><span class="o">.</span><span class="n">time_taken</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">time_taken</span><span class="p">)</span>
<span class="go">0.876</span>
</pre></div>
</div>
<p>Note that the <cite>time_taken</cite> is expressed in seconds. More instructions on obtaining data from <a class="reference internal" href="cunqa.result.Result.html#cunqa.result.Result" title="cunqa.result.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>
objects can be found on its documentation.</p>
<section id="handling-qjobs-sent-to-the-same-qpu">
<h2>Handling QJobs sent to the same QPU<a class="headerlink" href="#handling-qjobs-sent-to-the-same-qpu" title="Link to this heading"></a></h2>
<p>Let’s say we are sending two different jobs to the same QPU.
This would not result on a parallelization, each QPU can only execute one simulation at the time.
When a virtual QPU recieves a job while simulating one, it would wait in line untill the earlier finishes.
Because of how the client-server comunication is built, we must be careful and call for the results in the same order in which the jobs where submited.
The correct workflow would be:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qjob_1</span> <span class="o">=</span> <span class="n">qpu</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit_1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qjob_2</span> <span class="o">=</span> <span class="n">qpu</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result_1</span> <span class="o">=</span> <span class="n">qjob_1</span><span class="o">.</span><span class="n">result</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result_2</span> <span class="o">=</span> <span class="n">qjob_2</span><span class="o">.</span><span class="n">result</span>
</pre></div>
</div>
<p>This is because the server follows the rule FIFO (<em>First in first out</em>), if we want to recieve the second result,
the first one has to be out.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In the case in which the order is not respected, everything would work, but results will not correspond
to the job. A mix up would happen.</p>
</div>
</section>
<section id="handling-qjobs-sent-to-different-qpus">
<h2>Handling QJobs sent to different QPUs<a class="headerlink" href="#handling-qjobs-sent-to-different-qpus" title="Link to this heading"></a></h2>
<p>Here we can have parallelization since we are working with more than one virtual QPU.
Let’s send two circuits to two different QPUs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qjob_1</span> <span class="o">=</span> <span class="n">qpu_1</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit_1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qjob_2</span> <span class="o">=</span> <span class="n">qpu_2</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result_1</span> <span class="o">=</span> <span class="n">qjob_1</span><span class="o">.</span><span class="n">result</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result_2</span> <span class="o">=</span> <span class="n">qjob_2</span><span class="o">.</span><span class="n">result</span>
</pre></div>
</div>
<p>This way, when we send the first job, then inmediatly the sencond one is sent, because <a class="reference internal" href="cunqa.qpu.QPU.html#cunqa.qpu.QPU.run" title="cunqa.qpu.QPU.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> does not wait
for the simulation to finish. In this manner, both jobs are being run in both QPUs simultaneously! Here we do not need to perserve the order,
since jobs are managed by different <code class="xref py py-class docutils literal notranslate"><span class="pre">QClient</span></code> objects, there can be no mix up.</p>
<p>In fact, the function <a class="reference internal" href="cunqa.qjob.gather.html#cunqa.qjob.gather" title="cunqa.qjob.gather"><code class="xref py py-func docutils literal notranslate"><span class="pre">gather()</span></code></a> is designed for recieving a list of qjobs and return the results; therefore, let’s say
we have a list of circuits that we want to submit to a group of QPUs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qjobs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">circuit</span><span class="p">,</span> <span class="n">qpu</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="n">qpus</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span> <span class="n">qjob</span> <span class="o">=</span> <span class="n">qpu</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span> <span class="n">qjobs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qjob</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">gather</span><span class="p">(</span><span class="n">qjobs</span><span class="p">)</span>
</pre></div>
</div>
<p>In this workflow, all circuits are sent to each QPU an simulated at the same time. Then, when calling for the results, the program is blocked
waiting for all of them to finish. Other examples of classical parallelization of quantum simulation taks can be found at the
<a class="reference external" href="https://cesga-quantum-spain.github.io/cunqa/examples_gallery.html">Examples Gellery</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The function <a class="reference internal" href="cunqa.qjob.gather.html#cunqa.qjob.gather" title="cunqa.qjob.gather"><code class="xref py py-func docutils literal notranslate"><span class="pre">gather()</span></code></a> can also handle <a class="reference internal" href="#cunqa.qjob.QJob" title="cunqa.qjob.QJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">QJob</span></code></a> objects sent to the same virtual QPU, but the order must
be perserved in the list provided.</p>
</div>
</section>
<section id="upgrading-parameters-from-qjobs">
<h2>Upgrading parameters from QJobs<a class="headerlink" href="#upgrading-parameters-from-qjobs" title="Link to this heading"></a></h2>
<p>In some ocassion, especially working with variational quantum algorithms (VQAs) <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, they need of changing the parameters of the gates in a circuit
arises. These parameters are optimzied in order to get the circuit to output a result that minimizes a problem. In this minimization process,
parameters are updated on each iteration (in general).</p>
<p>Our first thought can be to update the parameters, build a new circuit with them and send
it to the QPU. Nevertheless, since the next circuit will have the same data but for the value of the parameters in the gates, a lot of information
is repeated, so <code class="xref py py-mod docutils literal notranslate"><span class="pre">cunqa</span></code> has a more efficient and simple way to handle this cases: a method to send to the QPU a list with the new parameters
to be assigned to the circuit, <a class="reference internal" href="#cunqa.qjob.QJob.upgrade_parameters" title="cunqa.qjob.QJob.upgrade_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">upgrade_parameters()</span></code></a>.</p>
<p>Let’s see a simple example: creating a parametric circuit and uptading its parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># building the parametric circuit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">circuit</span> <span class="o">=</span> <span class="n">CunqaCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">circuit</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">circuit</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">circuit</span><span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="mf">0.98</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">circuit</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># sending the circuit to a virtual QPU</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qjob</span> <span class="o">=</span> <span class="n">qpu</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># defining the new set of parameters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_parameters</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># upgrading the parameters of the job</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">(</span><span class="n">new_parameters</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">qjob</span><span class="o">.</span><span class="n">result</span>
</pre></div>
</div>
<p>From this simple workflow, we can build loops that update parameters according to some rules, or by a optimizator, and upgrade the circuit until
some stoping criteria is fulfilled.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before sending the circuit or upgrading its parameters, the result of the prior job must be called. It can be done manually, so that we can
save it and obtain its information, or it can be done automatically as in the example above, but be aware that once the <a class="reference internal" href="#cunqa.qjob.QJob.upgrade_parameters" title="cunqa.qjob.QJob.upgrade_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">upgrade_parameters()</span></code></a>
method is called, this result is discarded.</p>
</div>
<section id="references">
<h3>References:<a class="headerlink" href="#references" title="Link to this heading"></a></h3>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://arxiv.org/abs/2012.09265">Variational Quantum Algorithms arXiv</a> .</p>
</aside>
</aside>
</section>
</section>
</dd></dl>

<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 90.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#cunqa.qjob.QJob.result" title="cunqa.qjob.QJob.result"><code class="xref py py-obj docutils literal notranslate"><span class="pre">result</span></code></a></p></td>
<td><p>Result of the job.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_taken</span></code></p></td>
<td><p>Time that the job took.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">qclient</span></code></p></td>
<td><p>Client linked to the server that listens at the virtual QPU.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Link to this heading"></a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="cunqa.qjob.QJob.__init__">
<span class="sig-prename descclassname"><span class="pre">QJob.</span></span><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qclient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cunqa.qclient.QClient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cunqa.backend.Backend.html#cunqa.backend.Backend" title="cunqa.backend.Backend"><span class="pre">Backend</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">circuit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="cunqa.circuit.CunqaCircuit.html#cunqa.circuit.CunqaCircuit" title="cunqa.circuit.CunqaCircuit"><span class="pre">CunqaCircuit</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">qiskit.QuantumCircuit</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">run_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cunqa.qjob.QJob.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the <a class="reference internal" href="#cunqa.qjob.QJob" title="cunqa.qjob.QJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">QJob</span></code></a> class.</p>
<p>Possible instructions to add as <cite>**run_parameters</cite> can be: <em>shots</em>, <em>method</em>, <em>parameter_binds</em>, <em>meas_level</em>, …
For further information, check <a class="reference internal" href="cunqa.qpu.QPU.html#cunqa.qpu.QPU.run" title="cunqa.qpu.QPU.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>At this point, <em>circuit</em> is asumed to be translated into the native gates of the <em>backend</em>.
Otherwise, simulation will fail and an error will be returned as the result.
For further details, checkout <a class="reference internal" href="generated/cunqa.transpile.html#module-cunqa.transpile" title="cunqa.transpile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">transpile</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qclient</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">QClient</span></code>) – client linked to the server that listens at the virtual QPU.</p></li>
<li><p><strong>backend</strong> (<a class="reference internal" href="cunqa.backend.Backend.html#cunqa.backend.Backend" title="cunqa.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code></a>) – gathers necessary information about the simulator.</p></li>
<li><p><strong>circ</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">qiskit.QuantumCircuit</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> | <a class="reference internal" href="cunqa.circuit.CunqaCircuit.html#cunqa.circuit.CunqaCircuit" title="cunqa.circuit.CunqaCircuit"><code class="xref py py-class docutils literal notranslate"><span class="pre">CunqaCircuit</span></code></a>) – circuit to be run.</p></li>
<li><p><strong>**run_parameters</strong> – any other simulation instructions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cunqa.qjob.QJob.result">
<span class="sig-prename descclassname"><span class="pre">QJob.</span></span><span class="sig-name descname"><span class="pre">result</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cunqa.qjob.QJob.result" title="Link to this definition"></a></dt>
<dd><p>Result of the job.
If no error occured during simulation, a <a class="reference internal" href="cunqa.result.Result.html#cunqa.result.Result" title="cunqa.result.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object is retured.
Otherwise, <a class="reference internal" href="cunqa.result.ResultError.html#cunqa.result.ResultError" title="cunqa.result.ResultError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultError</span></code></a> will be raised.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since to obtain the result the simulation has to be finished, this method is a blocking call,
which means that the program will be blocked until the <code class="xref py py-class docutils literal notranslate"><span class="pre">QClient</span></code> has recieved from
the corresponding server the outcome of the job.
The result is not sent from the server to the <code class="xref py py-class docutils literal notranslate"><span class="pre">QClient</span></code> until this method is called.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cunqa.qjob.QJob.submit">
<span class="sig-prename descclassname"><span class="pre">QJob.</span></span><span class="sig-name descname"><span class="pre">submit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#cunqa.qjob.QJob.submit" title="Link to this definition"></a></dt>
<dd><p>Asynchronous method to submit a job to the corresponding <code class="xref py py-class docutils literal notranslate"><span class="pre">QClient</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Differently from <a class="reference internal" href="#cunqa.qjob.QJob.result" title="cunqa.qjob.QJob.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">result()</span></code></a>, this is a non-blocking call.
Once a job is summited, there is no wait, the python program continues at the same time that
the corresponding server recieves and simualtes the circuit.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cunqa.qjob.QJob.upgrade_parameters">
<span class="sig-prename descclassname"><span class="pre">QJob.</span></span><span class="sig-name descname"><span class="pre">upgrade_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#cunqa.qjob.QJob.upgrade_parameters" title="Link to this definition"></a></dt>
<dd><p>Method to upgrade the parameters in a previously submitted job of parametric circuit.
By this call, first it is checked weather if the prior simulation’s result was called. If not, it calls it but does not store it, then
sends the new set of parameters to the server to be reasigned to the circuit and to simulate it.</p>
<p>This method can be used on a loop, always being careful if we want to save the intermediate results.</p>
<p>Examples of usage are shown above and on the <a class="reference external" href="https://cesga-quantum-spain.github.io/cunqa/examples_gallery.html">Examples Gallery</a>.
Also, this method is used by the class <a class="reference internal" href="cunqa.mappers.QJobMapper.html#cunqa.mappers.QJobMapper" title="cunqa.mappers.QJobMapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">QJobMapper</span></code></a>, checkout its documentation for a extensive description.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In the current version, parameters will be assigned to <strong>ALL</strong> parametric gates in the circuit. This means that if we want to make
some parameters fixed, it is on our responsibility to pass them correctly and in the correct order in the list.
If the number of parameters is less than the number of parametric gates in the circuit, an error will occur at the virtual QPU, on
the other hand, if more parameters are provided, there will only be used up to the number of parametric gates.</p>
<p>Also, only <em>rx</em>, <em>ry</em> and <em>rz</em> gates are supported for this functionality, that is, they are the only gates considered <em>parametric</em> for this functionality.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list[float</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">int]</span></code>) – list of parameters to assign to the parametrized circuit.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cunqa.qjob.gather.html" class="btn btn-neutral float-left" title="cunqa.qjob.gather" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cunqa.qjob.QJobError.html" class="btn btn-neutral float-right" title="cunqa.qjob.QJobError" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Álvaro Carballido, Marta Losada, Jorge Vázquez, Daniel Expósito.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>